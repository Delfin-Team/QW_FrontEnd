<!DOCTYPE html>
<html>
<head>

	<title>grupos</title>
	<meta charset="UTF-8">
	 <!-- Le decimos al navegador que nuestra web esta optimizada para moviles -->
	 <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
	 <!-- Cargamos el CSS -->
	 <link type="text/css" rel="stylesheet" href="../css/materialize.min.css" media="screen,projection"/>
	 <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
    <header>
      <div id="loadHere"></div>
    </header> 
  <div class="container" id="main">
    <div class="row">

      <h1 class="center-align" >Welcome</h1>
        <h2>Mis grupos</h2>
          <div class="row">
            <div class="col s6 offset-s3">
              <ul class="collection">
                <li class="collection-item avatar" v-for="group in groups">
                  <img src="../images/janeth.jpg" alt="" class="circle">
                  <span class="title"><a href="mygroup.html">{{group.name}}</a></span>
                  <p> Cantidad de Mienbros: </p>
                  <a href="#!" class="secondary-content"><i class="material-icons">grade</i></a>
                </li>
              </ul>
            </div>
          </div> 
        <h2>Grupos</h2>
        <div class="row">
          <div class="col s6 offset-s3">
            <ul class="collection">
              <li class="collection-item avatar">
                <img src="../images/emiliano.jpg" alt="" class="circle">
                <span class="title"><a href="#!">Los sure√±os</a></span>
                <p> Cantidad de Mienbros: </p>
                <a href="#!" class="secondary-content"><i class="material-icons">grade</i></a>
              </li>
            </ul>
          </div>
        </div>   
    </div>

    <!-- Modal Trigger -->
    <div class="fixed-action-btn horizontal click-to-toggle">
      <a class="btn-floating btn-large red">
        <i class="material-icons">supervisor_account</i>
      </a>
      <ul>
        
        <li><a  href="#modal1" class="btn-floating orange darken-1"><i class="material-icons">delete</i></a></li>
        <li><a  href="#modal2" class="btn-floating green"><i class="material-icons">group_add</i></a></li>
        <li><a  href="#modal3" class="btn-floating blue"><i class="material-icons">search</i></a></li>
      </ul>
    </div>

      <!-- Modal Structure -->
      <div id="modal1" class="modal">
        <div class="modal-content">
          <h4>Eliminar  un grupo</h4>
          <div class="row">
                <form class="col s12">
                  <div class="row">

                     <div class="input-field col s12">
                            <i class="material-icons prefix">people</i>
                            <input id="icon_prefix" type="text" class="validate" v-model="email">
                            <label for="icon_prefix">Nombre del Grupo</label>
                          </div>
                    <ul class="collection">
                      
                      <li v-for="item in searchUser" class="collection-item"><div>{{item.email}}<a href="#!" class="secondary-content"><i class="material-icons">delete_forever</i></a></div></li>
                    </ul>
                  
                  </div>
                </form> 
          </div>
        </div>
        <div class="modal-footer">
          <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Cancelar</a>
        </div>
      </div>

      <div id="modal2" class="modal">
        <div class="modal-content">
          <h4>Agregar Grupo</h4>
          <div class="row">
                <form class="col s12">
                  <div class="row">

                     <div class="input-field col s12">
                            <i class="material-icons prefix">people</i>
                            <input id="icon_prefix" type="text" class="validate">
                            <label for="icon_prefix">Nombre del Grupo</label>
                      </div>
                  </div>
                   <div class="input-field col s6 offset-s3">
                    <select>
                      <option value="" disabled selected>Escoge una opcion</option>
                      <option value="1">Privado</option>
                      <option value="2">Publico</option>
                    </select>
                    <label>Tipo de Grupo</label>
                  </div>
                </form> 
          </div>
        </div>
        <div class="modal-footer">
          <button class="modal-action modal-close waves-effect waves-green btn-flat" v-on:click="addGroup" > Agregar </button>
          <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Cancelar</a>
        </div>
      </div>

      <div id="modal3" class="modal">
        <div class="modal-content">
          <h4>Buscar Grupos</h4>
                    <div class="row">
                  <form class="col s12">
                    <div class="row">

                       <div class="input-field col s12">
                              <i class="material-icons prefix">people</i>
                              <input id="icon_prefix" type="text" class="validate" v-model="email">
                              <label for="icon_prefix">Nombre del Grupo</label>
                        </div>
                      <ul class="collection">
                        
                        <li v-for="item in searchUser" class="collection-item"><div>{{item.email}}<a href="#!" class="secondary-content"><i class="material-icons" >send</i></a></div></li>
                      </ul>
                    
                    </div>
                  </form> 
            </div>
        </div>
        <div class="modal-footer">
          <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Cancelar</a>

        </div>
      </div>
  </div>


     <!-- vue --> 
      <script type="text/javascript" src="https://unpkg.com/vue@2.4.1"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.16.2/axios.min.js"></script>
      <script type="text/javascript" src="../js/app.js"></script>
      <script type="text/javascript">
        Vue.component('mycomponent',{
          template:  '<div>A custom component!</div>',
        });
        
        new Vue({
          el: "#main",
          created: function(){
            //this.getGroups();
          },
          data: {
            groups: [],
            nameGroup: "",
          },
          methods:{
            getGroups: function(){
              var apiURl = "http://198.199.80.27/api/groups";
              axios.get(apiURl).then(response => {
                this.groups = response.data.groups;
                console.log(this.groups);
              });
            },
            addGroup: function(){
              axios.post("http://198.199.80.27/api/groups", {
                name: this.nameGroup,
              }).then(response => {
                  console.log(response.data);
                  this.nameGroup= "";
                  this.getGroups();
                }
              );
            },
          },
          computed:{
              searchGroup:function(){
              return this.list.filter((item)=>item.nameGroup.includes(this.nameGroup));
          }


        });
      </script>
      <!--Import jQuery before materialize.js-->
      <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
      <script type="text/javascript" src="../js/materialize.min.js"></script>
      <script type="text/javascript">
      $(document).ready(function()    {
          $('select').material_select();
          $('.modal').modal();
      })
      </script>
</body>
</html>


