<!DOCTYPE html>
<html>
<head>
  <!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="../css/materialize.min.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <meta charset="utf-8">

  <title>Iniciar sesión</title>

</head>
<body>
  <!--this div will load the navbar usgin jquery-->
  <div id="loadHere"></div>

  <BR>
  <h2 class="center-align"><font color=""> Inicia sesión</font></h2>
  <BR>
  <div class="container blue lighten-5 z-depth-3">
    <!--h5 class="indigo center-align"><font color="white">Inicia sesión</font></h5-->
    <div class="container border-radius: 10px" id="main">
      <div class="row">
        <div class="col s9 offset s3">
          <!--Materialize Components Forms-->
          <div class="row">
            <form class="col s12" >

              <div class="row">
                <div class="input-field col s12">
                  <input id="email" type="email" class="validate" v-model="email">
                  <label for="email" data-error="wrong" data-success="right">Email</label>
                </div>
              </div>

              <div class="row">
                <div class="input-field col s12">
                  <input id="password" type="password" class="validate" v-model="password">
                  <label for="password">Password</label>
                </div>
              </div>

              <div class="row">
                <input type="checkbox" id="cbox1" value="first_checkbox"> <label for="cbox1"> Recordarme </label>

                <div class="right-align"><a href="#">¿Olvidaste tu contraseña?</a></div>


              </div>

            </form>
          </div>
        </div>
      </div>
      <div class="center-align">
        <button class="btn waves-effect waves-light z-depth-5" v-on:click="authenticate">Iniciar sesión</button>
      </div>
      token: {{token}} <hr>
      email : {{email}} <hr>
      password: {{password}}
    </div>
  </div>


  <br>
  <div class="row">
    <div class="right-align">
      <span style="margin-right:1em"><a href="#">No tengo cuenta</a></span>
    </div>
  </div>

  <script type="text/javascript" src="https://unpkg.com/vue@2.4.1"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.16.2/axios.min.js"></script>
  <!--jQuery before JS-->
  <script src="../js/jquery.min.js"></script>
  <!-- Compiled and minified JavaScript -->
  <script src="../js/materialize.min.js"></script>
  <script type="text/javascript">
    $(document).ready(function()    {
      $('#loadHere').load('navbarindex.html');
    })
  </script>
  <script>
    new Vue({
      el: "#main",
      data: {
        email: "",
        password: "",
        token: "",
      },
      methods: {
        authenticate: function(){
          axios.post("http://localhost:8000/api/authenticate",{
            email: this.email,
            password: this.password,
          }).then(response => {
            console.log(response.data.token);
            this.token = response.data.token;
          }).catch(error => {
            console.log(error);
          });
        }
      }
    });
  </script>
</body>
</html>
